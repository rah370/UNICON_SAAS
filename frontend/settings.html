<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>UNICON ‚Äì Settings</title>
  <link rel="icon" href="../UNICON.png?v=1758434378" type="image/png" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{ --brand-color:#1D4E89; }
    body{ font-family:Inter, ui-sans-serif, system-ui; background:#fbf7f3; color:#0f172a; }
    .wm{position:fixed;inset:0;pointer-events:none;background-repeat:no-repeat;background-position:center;background-size:min(60vw,680px);opacity:.08;z-index:0}
    .btn-brand{ background:var(--brand-color); color:#fff; }
  </style>
</head>
<body class="antialiased">
  <div class="wm" style="background-image:url('../UNICON.png?v=1758434378')" aria-hidden="true"></div>
  <main class="relative z-10 min-h-screen px-4 py-6">
    <header class="max-w-6xl mx-auto mb-4 flex items-center gap-3 justify-between">
      <div class="hidden md:flex items-center gap-2 flex-1 max-w-xl">
        <div class="relative flex-1">
          <svg class="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
          <input id="globalSearch" type="search" placeholder="Search settings‚Ä¶" class="w-full rounded-full border border-slate-200 bg-white px-10 py-2 text-sm" />
        </div>
      </div>
      <div class="relative flex items-center gap-2">
        <button title="Notifications" class="h-9 w-9 grid place-items-center rounded-full border border-slate-200 bg-white">üîî</button>
        <button id="userMenuBtn" title="Account" class="h-9 w-9 rounded-full border border-slate-200 bg-[var(--brand-color)] text-white grid place-items-center">üë§</button>
        <div id="userMenu" class="hidden absolute right-0 top-12 w-60 rounded-2xl border border-slate-200 bg-white shadow-xl p-2">
          <a id="menuProfile" class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-slate-50 text-[var(--brand-color)]" href="javascript:void(0)">üë§ Profile</a>
          <a id="menuHome" class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-slate-50" href="javascript:void(0)">üè† My Home</a>
          <a id="menuHelp" class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-slate-50" href="javascript:void(0)">‚ùì Help Center ‚Üó</a>
          <div class="my-2 border-t"></div>
          <a id="menuLogout" class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-slate-50 text-rose-600" href="javascript:void(0)">Log Out</a>
        </div>
      </div>
    </header>

    <section class="max-w-6xl mx-auto grid lg:grid-cols-[280px_1fr] gap-4">
      <aside class="rounded-2xl border border-slate-200 bg-white p-3 h-max sticky top-4">
        <nav class="space-y-1 text-sm">
          <a href="#account" class="block px-3 py-2 rounded-lg hover:bg-slate-50">Account</a>
          <a href="#privacy" class="block px-3 py-2 rounded-lg hover:bg-slate-50">Privacy</a>
          <a href="#security" class="block px-3 py-2 rounded-lg hover:bg-slate-50">Security</a>
          <a href="#notifications" class="block px-3 py-2 rounded-lg hover:bg-slate-50">Notifications</a>
          <a href="#appearance" class="block px-3 py-2 rounded-lg hover:bg-slate-50">Appearance</a>
          <a href="#blocking" class="block px-3 py-2 rounded-lg hover:bg-slate-50">Blocking</a>
          <a href="#about" class="block px-3 py-2 rounded-lg hover:bg-slate-50">About</a>
        </nav>
      </aside>
      <div class="space-y-4">
        <div id="account" class="rounded-2xl border border-slate-200 bg-white p-4">
          <div class="text-lg font-semibold mb-2">Account</div>
          <div class="grid md:grid-cols-2 gap-3">
            <label class="text-sm">Full name<input id="set_name" class="mt-1 w-full rounded-lg border px-3 py-2"/></label>
            <label class="text-sm">Username<input id="set_username" class="mt-1 w-full rounded-lg border px-3 py-2"/></label>
            <label class="text-sm">Website<input id="set_website" class="mt-1 w-full rounded-lg border px-3 py-2"/></label>
            <label class="text-sm">Bio<textarea id="set_bio" rows="3" class="mt-1 w-full rounded-lg border px-3 py-2"></textarea></label>
          </div>
          <div class="mt-3 flex items-center gap-2">
            <button id="save_account" class="rounded-md px-4 py-2 btn-brand">Save</button>
            <span id="msg_account" class="text-sm text-green-700 hidden">Saved</span>
          </div>
        </div>

        <div id="privacy" class="rounded-2xl border border-slate-200 bg-white p-4">
          <div class="text-lg font-semibold mb-2">Privacy</div>
          <label class="flex items-center justify-between py-2"><span>Private account</span><input id="priv_private" type="checkbox"/></label>
          <label class="flex items-center justify-between py-2"><span>Allow search by email</span><input id="priv_searchable" type="checkbox"/></label>
          <label class="flex items-center justify-between py-2"><span>Allow message requests</span><input id="priv_dm" type="checkbox"/></label>
        </div>

        <div id="security" class="rounded-2xl border border-slate-200 bg-white p-4">
          <div class="text-lg font-semibold mb-2">Security</div>
          <div class="grid md:grid-cols-[1fr_auto] gap-2 items-end">
            <label class="text-sm">New password<input id="sec_pass" type="password" class="mt-1 w-full rounded-lg border px-3 py-2"/></label>
            <button id="sec_change" class="rounded-md px-4 py-2 border">Change</button>
          </div>
          <div class="mt-3 text-xs text-slate-600">Password change is simulated for demo. No server call.</div>
        </div>

        <div id="notifications" class="rounded-2xl border border-slate-200 bg-white p-4">
          <div class="text-lg font-semibold mb-2">Notifications</div>
          <label class="flex items-center justify-between py-2"><span>In‚Äëapp notifications</span><input id="not_inapp" type="checkbox"/></label>
          <label class="flex items-center justify-between py-2"><span>Email updates</span><input id="not_email" type="checkbox"/></label>
          <label class="flex items-center justify-between py-2"><span>Push notifications</span><input id="not_push" type="checkbox"/></label>
        </div>

        <div id="appearance" class="rounded-2xl border border-slate-200 bg-white p-4">
          <div class="text-lg font-semibold mb-2">Appearance</div>
          <label class="flex items-center justify-between py-2"><span>Dark mode</span><input id="app_dark" type="checkbox"/></label>
          <label class="text-sm block mt-2">Language<select id="app_lang" class="mt-1 w-full rounded-lg border px-3 py-2"><option>English</option><option>Filipino</option></select></label>
          <label class="text-sm block mt-2">Timezone<select id="app_tz" class="mt-1 w-full rounded-lg border px-3 py-2"><option>UTC</option><option>Asia/Manila (UTC+8)</option><option>America/New_York (UTC-5)</option></select></label>
        </div>

        <div id="blocking" class="rounded-2xl border border-slate-200 bg-white p-4">
          <div class="text-lg font-semibold mb-2">Blocking</div>
          <div class="text-sm text-slate-600">No blocked users.</div>
        </div>

        <div id="about" class="rounded-2xl border border-slate-200 bg-white p-4">
          <div class="text-lg font-semibold mb-2">About</div>
          <p class="text-sm text-slate-600">UNICON is a campus social app for announcements, events, marketplace, clubs and profiles.</p>
          <div class="mt-3 flex items-center gap-2">
            <button id="logout" class="rounded-md px-4 py-2 border">Log out</button>
            <button id="clear_data" class="rounded-md px-4 py-2 border">Clear local data</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>
    function getBranding(){ try { return JSON.parse(localStorage.getItem('uniconBrand')||'null'); }catch{ return null; } }
    (function(){ const b=getBranding(); if(b?.color) document.body.style.setProperty('--brand-color', b.color); })();
    // header menu + search
    (function(){
      const menuBtn = document.getElementById('userMenuBtn');
      const menu = document.getElementById('userMenu');
      if(menuBtn && menu){ menuBtn.addEventListener('click', (e)=>{ e.stopPropagation(); menu.classList.toggle('hidden'); }); document.addEventListener('click', ()=> menu.classList.add('hidden')); }
      function nav(id, href){ const el=document.getElementById(id); if(!el) return; el.addEventListener('click', ()=>{ if(id==='menuLogout'){ try{ localStorage.removeItem('uniconSessionEmail'); }catch{} } location.href = href; }); }
      nav('menuProfile','profile.html'); nav('menuHome','for-you.html'); const help=document.getElementById('menuHelp'); if(help) help.addEventListener('click', ()=> window.open('https://example.com/help','_blank'));
      const input = document.getElementById('globalSearch'); if(input){ const saved=localStorage.getItem('unicon_global_search')||''; if(saved) input.value=saved; input.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ localStorage.setItem('unicon_global_search', input.value); try{ window.dispatchEvent(new CustomEvent('unicon_search',{ detail: input.value })); }catch{} } }); }
    })();

    // Populate + save settings
    (function(){
      // account
      const prof = (function(){ try{ return JSON.parse(localStorage.getItem('uniconProfile')||'null')||{}; }catch{ return {}; } })();
      const $ = (id)=> document.getElementById(id);
      $('#set_name').value = prof.name||'';
      $('#set_username').value = prof.username || (prof.email? prof.email.split('@')[0] : '');
      $('#set_website').value = prof.website||'';
      $('#set_bio').value = prof.bio||'';
      $('#save_account').onclick = ()=>{ const next = { ...prof, name:$('#set_name').value, username:$('#set_username').value, website:$('#set_website').value, bio:$('#set_bio').value }; try{ localStorage.setItem('uniconProfile', JSON.stringify(next)); }catch{}; const m=document.getElementById('msg_account'); m.classList.remove('hidden'); setTimeout(()=>m.classList.add('hidden'), 1200); };

      // privacy
      const privacy = (function(){ try{ return JSON.parse(localStorage.getItem('unicon_privacy')||'null')||{}; }catch{ return {}; } })();
      $('#priv_private').checked = !!privacy.private;
      $('#priv_searchable').checked = !!privacy.searchable;
      $('#priv_dm').checked = privacy.dm!==false;
      ['priv_private','priv_searchable','priv_dm'].forEach(id=> document.getElementById(id).addEventListener('change', ()=>{
        const p={ private:$('#priv_private').checked, searchable:$('#priv_searchable').checked, dm:$('#priv_dm').checked }; try{ localStorage.setItem('unicon_privacy', JSON.stringify(p)); }catch{}
      }));

      // security (demo)
      document.getElementById('sec_change').onclick = ()=>{ const v=document.getElementById('sec_pass').value; if(!v || v.length<6){ alert('Use 6+ characters'); return; } alert('Password updated (demo)'); document.getElementById('sec_pass').value=''; };

      // notifications
      const notif = (function(){ try{ return JSON.parse(localStorage.getItem('unicon_notifications')||'null')||{ inapp:true,email:false,push:false }; }catch{ return {inapp:true}; } })();
      $('#not_inapp').checked = !!notif.inapp; $('#not_email').checked=!!notif.email; $('#not_push').checked=!!notif.push;
      ['not_inapp','not_email','not_push'].forEach(id=> document.getElementById(id).addEventListener('change', ()=>{
        const n={ inapp:$('#not_inapp').checked, email:$('#not_email').checked, push:$('#not_push').checked }; try{ localStorage.setItem('unicon_notifications', JSON.stringify(n)); }catch{}
      }));

      // appearance
      const prefs = (function(){ try{ return JSON.parse(localStorage.getItem('unicon_prefs')||'null')||{}; }catch{ return {}; } })();
      $('#app_dark').checked = !!prefs.dark;
      document.getElementById('app_dark').addEventListener('change', ()=>{ const next={...prefs,dark:document.getElementById('app_dark').checked}; try{ localStorage.setItem('unicon_prefs', JSON.stringify(next)); }catch{} alert('Theme preference saved'); });
      $('#app_lang').value = prefs.lang||'English';
      $('#app_tz').value = prefs.tz||'UTC';
      ['app_lang','app_tz'].forEach(id=> document.getElementById(id).addEventListener('change', ()=>{ const next={...prefs, lang:$('#app_lang').value, tz:$('#app_tz').value}; try{ localStorage.setItem('unicon_prefs', JSON.stringify(next)); }catch{} }));

      // danger
      document.getElementById('logout').onclick = ()=>{ try{ localStorage.removeItem('uniconSessionEmail'); }catch{} location.href='login.html'; };
      document.getElementById('clear_data').onclick = ()=>{ if(confirm('Clear local data? This logs you out.')){ try{ localStorage.clear(); }catch{} location.href='login.html'; } };
    })();
  </script>
</body>
</html>
