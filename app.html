<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>UNICON App</title>
  <link rel="icon" href="UNICON.png?v=1758434378" type="image/png" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script defer crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script defer crossorigin src="https://unpkg.com/framer-motion/dist/framer-motion.umd.js"></script>
  <script defer crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    html, body, #root { height: 100%; }
    body { font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; background:#fbf7f3; }
    .wm{position:absolute;inset:0;pointer-events:none;background-repeat:no-repeat;background-position:center;background-size:250px;opacity:.07}
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel" data-presets="env,react">
    const fm = window.framerMotion || {};
    const MotionDiv = fm.motion ? (p)=>React.createElement(fm.motion.div,p) : (p)=> <div {...p}/>;
    const { useState } = React;
    function getBranding(){ try { return JSON.parse(localStorage.getItem('uniconBrand')||'null'); }catch{ return null; } }
    function applyBranding(b){ const root = document.body; if (b?.color){ root.style.setProperty('--brand-color', b.color);} }
    const branding = getBranding(); applyBranding(branding);
    const API_BASE = 'api';
    async function api(path, options={}){ const res = await fetch(`${API_BASE}/${String(path).replace(/^\//,'')}`, { method:'GET', headers:{'Content-Type':'application/json'}, ...options}); let data={}; try{ data = await res.json(); }catch{} if(!res.ok) throw new Error(data?.error||`Request failed (${res.status})`); return data; }

    // import the full App code from index.html by inlining the minimal subset we need
    // For brevity and to avoid duplication, we display a simple mount that reuses the same structure
    // via iframe-like navigation would be overkill; instead we copy the App function core from index

    function LogoMark({ size = 56 }){
      const b = getBranding();
      return <img src={b?.logoData || 'UNICON.png?v=1758434378'} alt="UNICON" style={{ width:size,height:size }} className="rounded-xl object-contain"/>;
    }

    const Home = (props)=> (<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={props.className}><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9,22 9,12 15,12 15,22"/></svg>);
    const Users = Home; const MessageSquare = Home; const CalendarDays = Home; const Store = Home; const LogOut = Home;

    function BottomNav({ active, onChange }){
      const items = [
        { key:'forYou', label:'For you', icon: Home },
        { key:'moments', label:'Moments', icon: MessageSquare },
        { key:'marketplace', label:'Marketplace', icon: Store },
        { key:'calendar', label:'Calendar', icon: CalendarDays },
        { key:'profile', label:'Profile', icon: Users },
      ];
      return (
        <nav className="fixed bottom-4 left-1/2 -translate-x-1/2 z-40">
          <ul className="flex gap-1 bg-white/90 backdrop-blur border border-slate-200 rounded-2xl p-1 shadow-xl">
            {items.map(({key,label,icon:Icon})=> (
              <li key={key}><button onClick={()=>onChange(key)} className={`flex items-center gap-2 rounded-[1rem] px-4 py-2 text-sm transition-all ${active===key? 'bg-[var(--brand-color)] text-white shadow' : 'text-slate-700 hover:bg-slate-100'}`}><Icon/><span className="hidden sm:inline">{label}</span></button></li>
            ))}
          </ul>
        </nav>
      );
    }

    function ForYouFeed(){ return <div className="space-y-4"><div className="rounded-2xl border border-slate-200 bg-white p-5 shadow-sm">Welcome back!</div></div>; }
    function Placeholder(){ return <div className="grid place-items-center py-16 text-slate-600">Coming soon</div>; }

    function App(){
      const [session, setSession] = useState(localStorage.getItem('uniconSessionEmail'));
      const [tab, setTab] = useState('forYou');
      if (!session) {
        window.location.href = 'login.html';
        return null;
      }
      return (
        <div className="min-h-screen text-slate-900 relative">
          <div className="wm" style={{ backgroundImage: "url('UNICON.png?v=1758434378')" }} aria-hidden="true"></div>
          <header className="sticky top-0 z-30 bg-sand-50/90 backdrop-blur border-b border-slate-200">
            <div className="max-w-5xl mx-auto px-4 h-16 flex items-center justify-between">
              <div className="flex items-center gap-3"><LogoMark size={64}/><div><h1 className="text-xl font-bold" style={{ background:'linear-gradient(135deg, color-mix(in srgb, var(--brand-color) 80%, white), var(--brand-color))', WebkitBackgroundClip:'text', color:'transparent' }}>UNICON</h1><p className="text-xs text-slate-600">{getBranding()?.name || 'Your School'}</p></div></div>
              <div className="flex items-center gap-3">
                <button onClick={()=>setTab('moments')} className="rounded-full px-4 py-2" style={{ background:'var(--brand-color)', color:'#fff' }}>POST</button>
                <button onClick={()=>{ localStorage.removeItem('uniconSessionEmail'); window.location.href='login.html'; }} className="rounded-full text-white px-5 py-2" style={{ background:'var(--brand-color)' }}>SIGN OUT</button>
              </div>
            </div>
          </header>
          <main className="max-w-5xl mx-auto px-4 pt-6 pb-28">
            {tab==='forYou' && <MotionDiv initial={{opacity:0,y:8}} animate={{opacity:1,y:0}} className="space-y-6 bg-white/80 backdrop-blur rounded-2xl p-4"><h2 className="text-xl font-semibold">For you</h2><ForYouFeed/></MotionDiv>}
            {tab==='forums' && <MotionDiv initial={{opacity:0,y:8}} animate={{opacity:1,y:0}} className="bg-white/80 backdrop-blur rounded-2xl p-4"><Placeholder/></MotionDiv>}
            {tab==='marketplace' && <MotionDiv initial={{opacity:0,y:8}} animate={{opacity:1,y:0}} className="space-y-6"><Placeholder/></MotionDiv>}
            {tab==='moments' && <MotionDiv initial={{opacity:0,y:8}} animate={{opacity:1,y:0}} className="space-y-6"><Placeholder/></MotionDiv>}
            {tab==='calendar' && <MotionDiv initial={{opacity:0,y:8}} animate={{opacity:1,y:0}} className="space-y-6"><Placeholder/></MotionDiv>}
            {tab==='profile' && <MotionDiv initial={{opacity:0,y:8}} animate={{opacity:1,y:0}} className="space-y-6"><Placeholder/></MotionDiv>}
          </main>
          <BottomNav active={tab} onChange={setTab}/>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App/>);
  </script>
</body>
</html>



